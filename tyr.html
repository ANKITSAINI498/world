<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Currency Converter Working</title>
</head>
<body>

<h2>Modern sunglasses</h2>
<p>Starting at &dollar; <b>15</b>.00</p>
<p>Another product: &dollar; <b>50</b>.00</p>
<p>Special offer: &#8377; <b>1200</b>.00</p>

<label for="currency">Select Currency:</label>
<select id="currency" name="currency">
    <option value="usd">USD &dollar;</option>
    <option value="inr">INR &#8377;</option>
</select>

<script>
const conversionRate = 80; // 1 USD = 80 INR
const currencySelect = document.getElementById('currency');

// Detect all <b> elements
const priceElements = document.querySelectorAll('b');

// Initialize original USD values
priceElements.forEach(el => {
    if(!el.dataset.usd) {
        let parentText = el.parentElement.textContent;
        let num = parseFloat(el.textContent);
        
        // If parent contains ₹, convert to USD
        if(parentText.includes('₹') || parentText.includes('&#8377')) {
            el.dataset.usd = (num / conversionRate).toFixed(2);
        } else {
            el.dataset.usd = num.toFixed(2);
        }
    }
});

function updatePrices() {
    const selectedCurrency = currencySelect.value;

    priceElements.forEach(el => {
        const usdValue = parseFloat(el.dataset.usd);

        // Only update the <b> content, keep parent text intact
        if(selectedCurrency === 'usd') {
            el.previousSibling.textContent = ' $ ';
            el.textContent = usdValue.toFixed(2);
        } else if(selectedCurrency === 'inr') {
            const inrValue = usdValue * conversionRate;
            el.previousSibling.textContent = ' ₹ ';
            el.textContent = inrValue.toFixed(2);
        }
    });
}

// Initial update
updatePrices();

// Update on dropdown change
currencySelect.addEventListener('change', updatePrices);
</script>

</body>
</html>
